# ðŸ³ Docker Compose Management Repository

Welcome to my personal Docker Compose playground! ðŸŽ‰ This repo provides a set of Docker Compose configurations, environment file templates, and management scripts to deploy and manage various services using Docker. Itâ€™s designed to simplify the setup, maintenance, and management of multiple Docker services with a single, centralized workflowâ€¦ mostly just for me, but feel free to poke around! ðŸ˜„

## ðŸ“‚ Repository Structure

- **`.scripts/`**: Contains handy scripts to manage Docker Compose services and create environment file symlinks:
  - **`create_env_symlinks.sh`**: ðŸª„ Creates symlinks for `default.env` in each service directory.
  - **`manage-services.sh`**: ðŸ§° Manage Docker Compose services (launch, restart, pull, shutdown, and clean).
  - **`run_list.example`**: ðŸ“ Example file listing services to include when running `manage-services.sh`.
  - **`run_all_except_list.example`**: ðŸš« Example file listing services to exclude when running `manage-services.sh`.

- **Service Directories**: Each directory (like `cloudflare-ddns`, `frigate`, `plex`) contains:
  - **`compose.yaml`**: âš™ï¸ Docker Compose file for the service.
  - **`default.env`**: ðŸ”— Symlink to the shared `default.env` file in the root directory. (Generated by `create_env_symlinks.sh`, not included in the repo).
  - **`*.env.example`**: ðŸŒ± Example environment files for service-specific configurations.

- **`default.env`**: ðŸŒ Template environment file used as a base configuration for all services.  
  *(Not included in the repo. Copy `default.env.example` and create it yourself.)*
- **`default.env.example`**: âœ¨ Example of the base environment configuration.

## ðŸš€ Getting Started

### Prerequisites

- Make sure you have [Docker](https://www.docker.com/get-started) ðŸ³ and [Docker Compose](https://docs.docker.com/compose/install/) installed on your machine.

### Step-by-Step Setup

1. **Clone the Repository**:
   ```sh
   git clone https://github.com/treysullivent/docker-compose.git
   cd docker-compose
   ```

2. **Create Environment Files**:
   - Run the `create_env_symlinks.sh` script to create symlinks for `default.env` in each service directory:
     ```sh
     .scripts/create_env_symlinks.sh
     ```

   - For services requiring additional environment variables, copy the example `.env.example` files and fill in the values:
     ```sh
     cp cloudflare-ddns/cloudflare.env.example cloudflare-ddns/cloudflare.env
     # Repeat for other services as needed
     ```

3. **Configure the Run List**:
   - Edit `run_list` or `run_all_except_list` in the `.scripts` directory to specify which services to include or exclude when running `manage-services.sh`.
     - **`run_list`**: List of services to run. Leave empty to run all services.
     - **`run_all_except_list`**: List of services to exclude. Leave empty to run all services.

4. **Manage Services**:
   - Use the `manage-services.sh` script to manage your Docker Compose services:
     ```sh
     .scripts/manage-services.sh --launch
     ```
   - Other options include:
     - `--restart`: Restart services ðŸ”„
     - `--pull`: Pull the latest Docker images â¬‡ï¸
     - `--shutdown`: Shutdown services ðŸ›‘
     - `--clean`: Prune all unused Docker objects ðŸ§¹

## ðŸŽ¨ Customization

- **Environment Files**: Customize the `default.env` and other `.env` files to fit your specific environment and service needs.
- **Compose Files**: Tweak `compose.yaml` files in each service directory to adjust Docker Compose configurations like ports, volumes, and network settings.

## ðŸ’¡ Example Usage

1. **Launch All Services**:
   ```sh
   .scripts/manage-services.sh --launch
   ```

2. **Restart Specific Services**:
   ```sh
   echo -e "cloudflare-ddns\nfrigate" > .scripts/run_list
   .scripts/manage-services.sh --restart
   ```

3. **Pull Latest Images and Launch Services Except Specific Ones**:
   ```sh
   echo -e "plex\nyoutube-dl" > .scripts/run_all_except_list
   .scripts/manage-services.sh --pull --launch
   ```

## ðŸ›  Troubleshooting

- **Missing Environment Files**: Make sure all necessary `.env` files are created and filled out correctly.
- **Permission Issues**: Check that Docker has the correct permissions to access directories and files specified in `compose.yaml`.
- **Service Logs**: View logs for specific services using:
  ```sh
  docker compose -f <service-directory>/compose.yaml logs
  ```

## ðŸŒŸ Contributing

Contributions, issues, and feature requests are welcomeâ€¦ but honestly, this is mostly for fun and education, so don't worry about it!
